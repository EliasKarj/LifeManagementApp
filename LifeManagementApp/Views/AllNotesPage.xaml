<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:LifeManagementApp.ViewModels"
             xmlns:cv="clr-namespace:LifeManagementApp.Resources.Converters"
             x:Class="LifeManagementApp.Views.AllNotesPage"
             Title="Muistiinpanot">


	<ContentPage.Resources>
		<cv:FirstLineConverter x:Key="FirstLineC"/>
	</ContentPage.Resources>

	<Grid RowDefinitions="Auto, *, Auto" Padding="10" RowSpacing="10">

		<Frame Grid.Row="0" BackgroundColor="#E3F2FD" Padding="15" CornerRadius="10" BorderColor="#2196F3">
			<VerticalStackLayout>
				<Label Text="ðŸŽ‰ PÃ¤ivÃ¤n vitsi:" TextColor="#1565C0" FontAttributes="Bold" FontSize="12"/>
				<Label Text="{Binding DailyJoke}" TextColor="#0D47A1" FontAttributes="Italic" FontSize="14" Margin="0,5,0,0"/>
			</VerticalStackLayout>
		</Frame>

		<CollectionView Grid.Row="1" ItemsSource="{Binding Notes}" SelectionMode="None">
			<CollectionView.ItemTemplate>
				<DataTemplate>
					<StackLayout Padding="10">
						<StackLayout.GestureRecognizers>
							<TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:AllNotesViewModel}}, Path=SelectCommand}" CommandParameter="{Binding .}"/>
						</StackLayout.GestureRecognizers>
						<Label Text="{Binding Text, Converter={StaticResource FirstLineC}}" FontAttributes="Bold" FontSize="18"/>
						<Label Text="{Binding Date, StringFormat='{0:dd.MM.yyyy HH:mm}'}" TextColor="Gray"/>
						<BoxView HeightRequest="1" Color="LightGray" Margin="0,5,0,0"/>
					</StackLayout>
				</DataTemplate>
			</CollectionView.ItemTemplate>
		</CollectionView>

		<Button Grid.Row="2"
                Text="+"
                Command="{Binding AddCommand}"
                FontSize="30"
                CornerRadius="30"
                HeightRequest="60"
                WidthRequest="60"
                HorizontalOptions="End"
                Margin="10"
                BackgroundColor="#512BD4"
                TextColor="White"/>
	</Grid>
</ContentPage>